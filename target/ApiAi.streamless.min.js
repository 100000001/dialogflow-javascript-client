var ApiAi=function(t){function __webpack_require__(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,__webpack_require__),i.l=!0,i.exports}var e={};return __webpack_require__.m=t,__webpack_require__.c=e,__webpack_require__.i=function(t){return t},__webpack_require__.d=function(t,e,n){__webpack_require__.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},__webpack_require__.n=function(t){var e=t&&t.__esModule?function getDefault(){return t.default}:function getModuleExports(){return t};return __webpack_require__.d(e,"a",e),e},__webpack_require__.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},__webpack_require__.p="/target/",__webpack_require__(__webpack_require__.s=10)}([function(t,e,n){"use strict";var i;!function(t){var e;!function(t){t[t.EN="en"]="EN",t[t.DE="de"]="DE",t[t.ES="es"]="ES",t[t.PT_BR="pt-BR"]="PT_BR",t[t.ZH_HK="zh-HK"]="ZH_HK",t[t.ZH_CN="zh-CN"]="ZH_CN",t[t.ZH_TW="zh-TW"]="ZH_TW",t[t.NL="nl"]="NL",t[t.FR="fr"]="FR",t[t.IT="it"]="IT",t[t.JA="ja"]="JA",t[t.KO="ko"]="KO",t[t.PT="pt"]="PT",t[t.RU="ru"]="RU",t[t.UK="uk"]="UK"}(e=t.AVAILABLE_LANGUAGES||(t.AVAILABLE_LANGUAGES={})),t.VERSION="2.0.0-beta.15",t.DEFAULT_BASE_URL="https://api.api.ai/v1/",t.DEFAULT_API_VERSION="20150910",t.DEFAULT_CLIENT_LANG=e.EN,t.DEFAULT_TTS_HOST="https://api.api.ai/api/tts"}(i=e.ApiAiConstants||(e.ApiAiConstants={}))},function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=function(t){function ApiAiBaseError(e){var n=t.call(this,e)||this;return n.message=e,n.stack=(new Error).stack,n}return i(ApiAiBaseError,t),ApiAiBaseError}(Error),o=function(t){function ApiAiClientConfigurationError(e){var n=t.call(this,e)||this;return n.name="ApiAiClientConfigurationError",n}return i(ApiAiClientConfigurationError,t),ApiAiClientConfigurationError}(r);e.ApiAiClientConfigurationError=o;var s=function(t){function ApiAiRequestError(e,n){void 0===n&&(n=null);var i=t.call(this,e)||this;return i.message=e,i.code=n,i.name="ApiAiRequestError",i}return i(ApiAiRequestError,t),ApiAiRequestError}(r);e.ApiAiRequestError=s},function(t,e,n){"use strict";var i=n(1),r=n(3),o=function(){function Request(t,e){this.apiAiClient=t,this.options=e,this.uri=this.apiAiClient.getApiBaseUrl()+"query?v="+this.apiAiClient.getApiVersion(),this.requestMethod=r.default.Method.POST,this.headers={Authorization:"Bearer "+this.apiAiClient.getAccessToken()},this.options.lang=this.apiAiClient.getApiLang(),this.options.sessionId=this.apiAiClient.getSessionId()}return Request.handleSuccess=function(t){return Promise.resolve(JSON.parse(t.responseText))},Request.handleError=function(t){var e=null;try{var n=JSON.parse(t.responseText);e=n.status&&n.status.errorDetails?new i.ApiAiRequestError(n.status.errorDetails,n.status.code):new i.ApiAiRequestError(t.statusText,t.status)}catch(n){e=new i.ApiAiRequestError(t.statusText,t.status)}return Promise.reject(e)},Request.prototype.perform=function(t){void 0===t&&(t=null);var e=t?t:this.options;return r.default.ajax(this.requestMethod,this.uri,e,this.headers).then(Request.handleSuccess.bind(this)).catch(Request.handleError.bind(this))},Request}();Object.defineProperty(e,"__esModule",{value:!0}),e.default=o},function(t,e,n){"use strict";var i=function(){function XhrRequest(){}return XhrRequest.ajax=function(t,e,n,i,r){return void 0===n&&(n=null),void 0===i&&(i=null),void 0===r&&(r={}),new Promise(function(o,s){var u=XhrRequest.createXMLHTTPObject(),a=e,p=null;if(n&&t===XhrRequest.Method.GET){a+="?";var c=0;for(var _ in n)n.hasOwnProperty(_)&&(c++&&(a+="&"),a+=encodeURIComponent(_)+"="+encodeURIComponent(n[_]))}else n&&(i||(i={}),i["Content-Type"]="application/json; charset=utf-8",p=JSON.stringify(n));for(var _ in r)_ in u&&(u[_]=r[_]);if(u.open(XhrRequest.Method[t],a,!0),i)for(var _ in i)i.hasOwnProperty(_)&&u.setRequestHeader(_,i[_]);p?u.send(p):u.send(),u.onload=function(){u.status>=200&&u.status<300?o(u):s(u)},u.onerror=function(){s(u)}})},XhrRequest.get=function(t,e,n,i){return void 0===e&&(e=null),void 0===n&&(n=null),void 0===i&&(i={}),XhrRequest.ajax(XhrRequest.Method.GET,t,e,n,i)},XhrRequest.post=function(t,e,n,i){return void 0===e&&(e=null),void 0===n&&(n=null),void 0===i&&(i={}),XhrRequest.ajax(XhrRequest.Method.POST,t,e,n,i)},XhrRequest.put=function(t,e,n,i){return void 0===e&&(e=null),void 0===n&&(n=null),void 0===i&&(i={}),XhrRequest.ajax(XhrRequest.Method.PUT,t,e,n,i)},XhrRequest.delete=function(t,e,n,i){return void 0===e&&(e=null),void 0===n&&(n=null),void 0===i&&(i={}),XhrRequest.ajax(XhrRequest.Method.DELETE,t,e,n,i)},XhrRequest.createXMLHTTPObject=function(){for(var t=null,e=0,n=XhrRequest.XMLHttpFactories;e<n.length;e++){var i=n[e];try{t=i()}catch(t){continue}break}return t},XhrRequest}();i.XMLHttpFactories=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],function(t){var e;!function(t){t[t.GET="GET"]="GET",t[t.POST="POST"]="POST",t[t.PUT="PUT"]="PUT",t[t.DELETE="DELETE"]="DELETE"}(e=t.Method||(t.Method={}))}(i||(i={})),Object.defineProperty(e,"__esModule",{value:!0}),e.default=i},function(t,e,n){"use strict";function __export(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}__export(n(5))},function(t,e,n){"use strict";function __export(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}var i=n(0),r=n(1),o=n(7),s=n(9),u=n(8);__export(n(6));var a=n(0);e.ApiAiConstants=a.ApiAiConstants;var p=function(){function ApiAiClient(t){if(!t||!t.accessToken)throw new r.ApiAiClientConfigurationError("Access token is required for new ApiAi.Client instance");this.accessToken=t.accessToken,this.apiLang=t.lang||i.ApiAiConstants.DEFAULT_CLIENT_LANG,this.apiVersion=t.version||i.ApiAiConstants.DEFAULT_API_VERSION,this.apiBaseUrl=t.baseUrl||i.ApiAiConstants.DEFAULT_BASE_URL,this.sessionId=t.sessionId||this.guid(),this.streamClientClass=t.streamClientClass||null}return ApiAiClient.prototype.textRequest=function(t,e){if(void 0===e&&(e={}),!t)throw new r.ApiAiClientConfigurationError("Query should not be empty");return e.query=t,new s.default(this,e).perform()},ApiAiClient.prototype.eventRequest=function(t,e,n){if(void 0===e&&(e={}),void 0===n&&(n={}),!t)throw new r.ApiAiClientConfigurationError("Event name can not be empty");return n.event={name:t,data:e},new o.EventRequest(this,n).perform()},ApiAiClient.prototype.ttsRequest=function(t){if(!t)throw new r.ApiAiClientConfigurationError("Query should not be empty");return new u.TTSRequest(this).makeTTSRequest(t)},ApiAiClient.prototype.createStreamClient=function(t){if(void 0===t&&(t={}),this.streamClientClass)return t.token=this.getAccessToken(),t.sessionId=this.getSessionId(),t.lang=this.getApiLang(),new this.streamClientClass(t);throw new r.ApiAiClientConfigurationError("No StreamClient implementation given to ApiAi Client constructor")},ApiAiClient.prototype.getAccessToken=function(){return this.accessToken},ApiAiClient.prototype.getApiVersion=function(){return this.apiVersion?this.apiVersion:i.ApiAiConstants.DEFAULT_API_VERSION},ApiAiClient.prototype.getApiLang=function(){return this.apiLang?this.apiLang:i.ApiAiConstants.DEFAULT_CLIENT_LANG},ApiAiClient.prototype.getApiBaseUrl=function(){return this.apiBaseUrl?this.apiBaseUrl:i.ApiAiConstants.DEFAULT_BASE_URL},ApiAiClient.prototype.setSessionId=function(t){this.sessionId=t},ApiAiClient.prototype.getSessionId=function(){return this.sessionId},ApiAiClient.prototype.guid=function(){var t=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()},ApiAiClient}();e.ApiAiClient=p},function(t,e,n){"use strict";var i;!function(t){var e;!function(t){t[t.ERR_NETWORK=0]="ERR_NETWORK",t[t.ERR_AUDIO=1]="ERR_AUDIO",t[t.ERR_SERVER=2]="ERR_SERVER",t[t.ERR_CLIENT=3]="ERR_CLIENT"}(e=t.ERROR||(t.ERROR={}));var n;!function(t){t[t.MSG_WAITING_MICROPHONE=0]="MSG_WAITING_MICROPHONE",t[t.MSG_MEDIA_STREAM_CREATED=1]="MSG_MEDIA_STREAM_CREATED",t[t.MSG_INIT_RECORDER=2]="MSG_INIT_RECORDER",t[t.MSG_RECORDING=3]="MSG_RECORDING",t[t.MSG_SEND=4]="MSG_SEND",t[t.MSG_SEND_EMPTY=5]="MSG_SEND_EMPTY",t[t.MSG_SEND_EOS_OR_JSON=6]="MSG_SEND_EOS_OR_JSON",t[t.MSG_WEB_SOCKET=7]="MSG_WEB_SOCKET",t[t.MSG_WEB_SOCKET_OPEN=8]="MSG_WEB_SOCKET_OPEN",t[t.MSG_WEB_SOCKET_CLOSE=9]="MSG_WEB_SOCKET_CLOSE",t[t.MSG_STOP=10]="MSG_STOP",t[t.MSG_CONFIG_CHANGED=11]="MSG_CONFIG_CHANGED"}(n=t.EVENT||(t.EVENT={}))}(i=e.IStreamClient||(e.IStreamClient={}))},function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(2),o=function(t){function EventRequest(){return null!==t&&t.apply(this,arguments)||this}return i(EventRequest,t),EventRequest}(r.default);e.EventRequest=o},function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(0),o=n(1),s=n(3),u=n(2),a=function(t){function TTSRequest(e,n){void 0===n&&(n={});var i=t.call(this,e,n)||this;i.apiAiClient=e,i.resolveTTSPromise=function(t){return i.speak(t.response)},i.rejectTTSPromise=function(t){throw new o.ApiAiRequestError(t)},i.uri=r.ApiAiConstants.DEFAULT_TTS_HOST;var s=window.AudioContext||webkitAudioContext;return TTSRequest.audioContext||(TTSRequest.audioContext=new s),i}return i(TTSRequest,t),TTSRequest.prototype.makeTTSRequest=function(t){if(!t)throw new o.ApiAiClientConfigurationError("Request can not be empty");var e={lang:"en-US",text:encodeURIComponent(t),v:this.apiAiClient.getApiVersion()},n={"Accept-language":"en-US",Authorization:"Bearer "+this.apiAiClient.getAccessToken()};return this.makeRequest(this.uri,e,n,{responseType:TTSRequest.RESPONSE_TYPE_ARRAYBUFFER}).then(this.resolveTTSPromise).catch(this.rejectTTSPromise.bind(this))},TTSRequest.prototype.makeRequest=function(t,e,n,i){return s.default.get(t,e,n,i)},TTSRequest.prototype.speak=function(t){var e=this;return t.byteLength?new Promise(function(n,i){TTSRequest.audioContext.decodeAudioData(t,function(t){return e.playSound(t,n)},i).then(null,function(t){return i(t)})}):Promise.reject("TTS Server unavailable")},TTSRequest.prototype.playSound=function(t,e){var n=TTSRequest.audioContext.createBufferSource();n.buffer=t,n.connect(TTSRequest.audioContext.destination),n.onended=e,n.start(0)},TTSRequest}(u.default);a.RESPONSE_TYPE_ARRAYBUFFER="arraybuffer",e.TTSRequest=a},function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(2),o=function(t){function TextRequest(){return null!==t&&t.apply(this,arguments)||this}return i(TextRequest,t),TextRequest}(r.default);Object.defineProperty(e,"__esModule",{value:!0}),e.default=o},function(t,e,n){t.exports=n(4)}]);